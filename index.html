<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unicode to NonUnicode - Telugu</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
    }
    textarea {
      resize: vertical;
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-200">

  <div class="max-w-4xl mx-auto px-4 py-10">
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold text-indigo-600 dark:text-indigo-400">Unicode to NonUnicode</h1>
      <p class="text-gray-600 dark:text-gray-300 mt-2">Telugu Text Converter (Ra-Type 01/02)</p>
    </header>

    <!-- Theme Toggle -->
    <div class="flex justify-end mb-4">
      <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-yellow-300 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none">
        <i class="fas fa-moon"></i>
      </button>
    </div>

    <!-- Input Section -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6">
      <label for="input" class="block text-sm font-medium mb-2">Unicode Telugu Input</label>
      <textarea id="input" rows="6" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-3 focus:ring-2 focus:ring-indigo-500 focus:outline-none bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" placeholder="‡∞™‡±á‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø ‡∞≤‡±á‡∞¶‡∞æ ‡∞ü‡±à‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø..."></textarea>
      <div id="char-count" class="text-sm text-gray-500 dark:text-gray-400 mt-1">Characters (excluding spaces): 0 / 3000</div>
    </div>

    <!-- Options -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6 space-y-4">
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="toggle-space" checked class="form-checkbox h-4 w-4 text-indigo-600 rounded focus:ring-indigo-500">
        <span class="text-sm">Replace spaces with non-breaking space (for Anu fonts)</span>
      </label>

      <div>
        <span class="text-sm font-medium">Select Mapping:</span>
        <label class="ml-4">
          <input type="radio" name="mapping" value="raType1" checked>
          <span class="text-sm ml-1">Ra-Type 01</span>
        </label>
        <label class="ml-4">
          <input type="radio" name="mapping" value="raType2">
          <span class="text-sm ml-1">Ra-Type 02</span>
        </label>
      </div>

      <label class="flex items-center space-x-2">
        <input type="checkbox" id="auto-copy" checked class="form-checkbox h-4 w-4 text-indigo-600 rounded focus:ring-indigo-500">
        <span class="text-sm">Auto-copy result to clipboard</span>
      </label>
    </div>

    <!-- Convert Button -->
    <div class="text-center mb-6">
      <button id="convert-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-lg shadow transition focus:outline-none focus:ring-2 focus:ring-indigo-500">
        üîÅ Convert & Copy
      </button>
    </div>

    <!-- Output -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
      <label for="output" class="block text-sm font-medium mb-2">NonUnicode Output (AnuFont Ready)</label>
      <textarea id="output" rows="6" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100" readonly placeholder="‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø..."></textarea>
    </div>

    <!-- Disclaimer -->
    <div class="mt-8 text-xs text-gray-500 dark:text-gray-400 bg-yellow-50 dark:bg-gray-800 p-3 rounded border border-yellow-200 dark:border-gray-700">
      <strong>Disclaimer:</strong> This tool converts Unicode Telugu to NonUnicode (AnuFont-style) using client-side logic. You must have AnuFont or similar installed to view the output correctly. Not affiliated with AnuFonts. Use at your own risk.
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center text-sm text-gray-500 dark:text-gray-400 py-6 mt-10 border-t border-gray-200 dark:border-gray-800">
    ¬© 2025 <strong>Telugu Unicode Converter</strong> | Hosted on GitHub
  </footer>

  <script>
    // Simple mapping for common Telugu characters (Ra-Type 01 example)
    const mappingA = {
      '‡∞Ö': 'a', '‡∞Ü': 'A', '‡∞á': 'i', '‡∞à': 'I', '‡∞â': 'u', '‡∞ä': 'U', '‡∞ã': 'Ru',
      '‡∞é': 'e', '‡∞è': 'E', '‡∞ê': 'y', '‡∞í': 'o', '‡∞ì': 'O', '‡∞î': 'au',
      '‡∞ï': 'k', '‡∞ñ': 'K', '‡∞ó': 'g', '‡∞ò': 'G', '‡∞ô': 'ng',
      '‡∞ö': 'c', '‡∞õ': 'C', '‡∞ú': 'j', '‡∞ù': 'J', '‡∞û': 'nj',
      '‡∞ü': 'T', '‡∞†': 'T', '‡∞°': 'D', '‡∞¢': 'D', '‡∞£': 'N',
      '‡∞§': 't', '‡∞•': 't', '‡∞¶': 'd', '‡∞ß': 'd', '‡∞®': 'n',
      '‡∞™': 'p', '‡∞´': 'p', '‡∞¨': 'b', '‡∞≠': 'b', '‡∞Æ': 'm',
      '‡∞Ø': 'y', '‡∞∞': 'r', '‡∞≤': 'l', '‡∞µ': 'v', '‡∞∂': 'S', '‡∞∑': 'z', '‡∞∏': 's', '‡∞π': 'h',
      '‡∞≥': 'L', '‡∞ï‡±ç‡∞∑': 'Kz', '‡∞ú‡±ç‡∞û': 'Gy',
      ' ': '\u00A0' // Non-breaking space
    };

    // Ra-Type 02 (example variation)
    const mappingB = { ...mappingA, '‡∞∞': 'R', '‡∞∞‡±ç': 'x' };

    // DOM Elements
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const charCount = document.getElementById('char-count');
    const convertBtn = document.getElementById('convert-btn');
    const toggleSpace = document.getElementById('toggle-space');
    const autoCopy = document.getElementById('auto-copy');
    const themeToggle = document.getElementById('theme-toggle');

    // Update character count
    function updateCount() {
      const text = input.value;
      const count = text.replace(/\s/g, '').length;
      charCount.textContent = `Characters (excluding spaces): ${count} / 3000`;
      charCount.className = count > 3000 ? 'text-red-500' : 'text-gray-500 dark:text-gray-400';
    }

    // Convert function
    function convertText() {
      const text = input.value;
      const useMappingA = document.querySelector("input[name='mapping']:checked").value === 'raType1';
      const map = useMappingA ? mappingA : mappingB;
      let result = '';

      let i = 0;
      while (i < text.length) {
        // Handle '‡∞∞‡±ç' specially if needed
        if (text[i] === '‡∞∞' && i + 1 < text.length && text[i + 1] === '‡±ç') {
          result += map['‡∞∞‡±ç'] || 'R';
          i += 2;
        } else {
          const char = text[i];
          result += map[char] || char;
          i++;
        }
      }

      // Replace normal spaces with non-breaking space if checked
      if (toggleSpace.checked) {
        result = result.replace(/ /g, '\u00A0');
      }

      output.value = result;

      // Auto-copy
      if (autoCopy.checked) {
        navigator.clipboard.writeText(result).then(() => {
          showToast("‚úÖ Converted & copied!");
        }).catch(() => {
          showToast("‚úÖ Converted (copy failed)");
        });
      } else {
        showToast("‚úÖ Converted!");
      }
    }

    // Show toast
    function showToast(msg) {
      const toast = document.createElement('div');
      toast.textContent = msg;
      toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 dark:bg-gray-200 text-white dark:text-gray-800 px-4 py-2 rounded-md shadow-lg text-sm z-50 transition-opacity duration-300';
      document.body.appendChild(toast);
      setTimeout(() => { toast.remove(); }, 2500);
    }

    // Event Listeners
    input.addEventListener('input', updateCount);
    convertBtn.addEventListener('click', convertText);

    // Theme toggle
    themeToggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      themeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    if (savedTheme === 'dark' || !savedTheme) {
      document.documentElement.classList.add('dark');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    } else {
      themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
    }

    // Initialize
    updateCount();
  </script>
</body>
</html>
